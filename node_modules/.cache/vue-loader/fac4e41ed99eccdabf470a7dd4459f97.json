{"remainingRequest":"E:\\AppFrida\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\AppFrida\\src\\views\\Formulario.vue?vue&type=style&index=0&id=54dc0eac&lang=css","dependencies":[{"path":"E:\\AppFrida\\src\\views\\Formulario.vue","mtime":1637376419880},{"path":"E:\\AppFrida\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\AppFrida\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1628298225000},{"path":"E:\\AppFrida\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\AppFrida\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\AppFrida\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1628298225000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouZWwtcmFkaW9fX2lubmVyOjphZnRlciB7DQogIHdpZHRoOiAwLjVlbTsNCiAgaGVpZ2h0OiAwLjVlbTsNCn0NCi5lbC1yYWRpb19faW5uZXIgew0KICB3aWR0aDogMS4xMjVlbTsNCiAgaGVpZ2h0OiAxLjEyNWVtOw0KfQ0K"},{"version":3,"sources":["E:\\AppFrida\\src\\views\\Formulario.vue"],"names":[],"mappings":";AAkUA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACtB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACf;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACf,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACjB","file":"E:/AppFrida/src/views/Formulario.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <h3>\r\n    Formulário de Avaliação de Risco em Violência Doméstica e Familiar contra a\r\n    Mulher\r\n  </h3>\r\n\r\n  <el-form ref=\"form\" :model=\"questions\">\r\n    <el-form-item v-if=\"isLogado == true\"  prop=\"nome\">\r\n      <el-input v-model=\"form.nome\" placeholder=\"Nome\"></el-input>\r\n    </el-form-item>\r\n    <div v-bind:key=\"question.id\" v-for=\"question in questions\">\r\n      <Question v-model=\"question.answer\" :alternatives=\"question.alternatives\" :question=\"question\" />\r\n    </div>\r\n  </el-form>\r\n\r\n  <el-button v-if=\"isLogado == true\" class=\"botao-salvar\" @click=\"onClick\" type=\"success\">Salvar</el-button>\r\n\r\n  <el-button v-if=\"isLogado == false\" class=\"botao-salvar\" type=\"success\" @click=\"mostrarResultado\">Mostrar Resultado</el-button>\r\n  <el-dialog v-model=\"dialogVisible\" width=\"80%\" title=\"Resumo da Avaliação de Risco FRIDA\" center :show-close=\"false\">\r\n    <p class=\"texto-dialog\">\r\n      Abaixo é exibido o resultado do Grau de Risco detectado no Formulário de Avaliação FRIDA, \r\n      esse resultado é obtido através das respostas\r\n      \"<b>Não</b>\", \r\n      \"<b>NS/NA</b> (Não se Aplica/Não Informado)\"\r\n      e \"<b>Sim</b>\"\r\n      informadas no Formulário, cada uma tendo um peso diferente para o resultado final.\r\n    </p>\r\n    <p class=\"percentage-label\"> Grau de Risco: <b>{{this.form.resultado.riscoDescricao}}</b></p>\r\n    \r\n    <el-divider class=\"divisor\">\r\n      <el-progress v-if=\"this.form.resultado.risco == 'B'\" type=\"circle\" percentage=\"10\" status=\"success\">\r\n        <span class=\"percentage-label\">Baixo</span>\r\n      </el-progress>\r\n\r\n      <el-progress v-if=\"this.form.resultado.risco == 'M'\" type=\"circle\" percentage=\"50\" status=\"warning\">\r\n        <span class=\"percentage-label\">Médio</span>\r\n      </el-progress>\r\n\r\n      <el-progress v-if=\"this.form.resultado.risco == 'E'\" type=\"circle\" percentage=\"100\" status=\"exception\">\r\n        <span class=\"percentage-label\">Elevado</span>\r\n      </el-progress>\r\n    </el-divider>\r\n    \r\n    <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button v-if=\"isLogado == false\" type=\"warning\" @click=\"goToAjuda\">Fazer Denúncia!</el-button>\r\n        <el-button v-if=\"isLogado == false\" type=\"primary\" @click=\"goToMenu\">Voltar ao Menu</el-button>\r\n        <el-button v-if=\"isLogado == true\" type=\"primary\" @click=\"goToCasos\">Voltar aos Casos</el-button>\r\n      </span>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport Question from \"../components/Question\";\r\nimport * as controller from \"../controller/ctlFormulario\";\r\n\r\nexport default {\r\n  name: \"App\",\r\n  components: {\r\n    Question,\r\n  },\r\n  methods: {\r\n    goToAjuda() {\r\n        this.dialogVisible = false;\r\n        this.$router.push({ path: \"Ajuda\" }).then(() => window.scrollTo(0, 0));\r\n    },\r\n    goToMenu() {\r\n        this.dialogVisible = false;\r\n        this.$router.push({ name: \"Home\" }).then(() => window.scrollTo(0, 0));\r\n    },\r\n    goToCasos() {\r\n        this.dialogVisible = false;\r\n        this.$router.push({ name: \"Casos\" }).then(() => window.scrollTo(0, 0));\r\n    },\r\n    mostrarResultado() {\r\n      if (this.isFormularioValido()) {\r\n        this.montarFormulario();\r\n        this.dialogVisible = true;\r\n      }\r\n    },\r\n    onClick() {\r\n      if (this.isFormularioValido()) {\r\n        this.montarFormulario();\r\n        if (this.id) {\r\n          controller.alterar(this.id, this.form).then(() => {\r\n            this.dialogVisible = true;\r\n          });\r\n        } else {\r\n          controller.incluir(this.form).then(() => {\r\n            this.dialogVisible = true;\r\n          });\r\n        }\r\n      }\r\n    },\r\n    isFormularioValido() {\r\n      let questaoInvalida = this.questions.find(x => x.answer == undefined);\r\n      if (questaoInvalida) {\r\n        this.$message.error(\"Questão \" + questaoInvalida.id + \" é obrigatória\");\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n    montarFormulario() {\r\n      for (const q of this.questions) {\r\n        this.form.resposta[\"r_\" + q.id] = q.answer;\r\n      }\r\n      this.form.resultado = this.geraResultado(this.form.resposta);\r\n    },\r\n    geraResultado(respostas) {\r\n      var resp = Object.values(respostas);\r\n      var counts = {};\r\n      for (var num of resp) {\r\n          counts[num] = counts[num] ? counts[num] + 1 : 1;\r\n      }\r\n\r\n      var totalSim = counts[1] || 0;\r\n      var totalNao = counts[2] || 0;\r\n      var totalNaoSabe = counts[3] || 0;\r\n      var totalNaoAplica = counts[4] || 0;\r\n      var totalNSeNA = totalNaoSabe + totalNaoAplica;\r\n      var risco = '';\r\n\r\n      switch (totalSim) {\r\n          case 0:\r\n          case 1:\r\n          case 2:\r\n              risco = (totalNSeNA > 0) ? 'M' : 'B';\r\n              break;\r\n          case 3:\r\n              risco = (totalNSeNA > 7) ? 'M' : 'B';\r\n              break;\r\n          case 4:\r\n              risco = (totalNSeNA > 3) ? 'M' : 'B';\r\n              break;\r\n          case 5:\r\n              risco = (totalNSeNA == 10) ? 'E' : 'M';\r\n              break;\r\n          case 6:\r\n              risco = (totalNSeNA > 7 && totalNSeNA < 11) ? 'E' : 'M';\r\n              break;\r\n          case 7:\r\n              risco = (totalNSeNA > 5 && totalNSeNA < 11) ? 'E' : 'M';\r\n              break;\r\n          case 8:\r\n              risco = (totalNSeNA > 3 && totalNSeNA < 11) ? 'E' : 'M';\r\n              break;\r\n          case 9:\r\n              risco = (totalNSeNA > 1 && totalNSeNA < 11) ? 'E' : 'M';\r\n              break;\r\n          default:\r\n              risco = 'E';\r\n              break;\r\n      }\r\n\r\n      return {\r\n          totalSim: totalSim,\r\n          totalNao: totalNao,\r\n          totalNaoSabe: totalNaoSabe,\r\n          totalNaoAplica: totalNaoAplica,\r\n          totalNSeNA: totalNSeNA,\r\n          risco: risco,\r\n          riscoDescricao: (risco == 'E') ? 'Elevado' : (risco == 'M') ? 'Médio' : 'Baixo'\r\n      };\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      dialogVisible: false,\r\n      isLogado: false,\r\n      id: null,\r\n      form: {\r\n        idCaso: \"\",\r\n        nome: \"\",\r\n        data: new Date(),\r\n        resposta: {},\r\n        resultado: {\r\n          riscoDescricao: 'Não Classificado',\r\n        },\r\n      },\r\n      items: [\r\n        {\r\n          to: \"/\",\r\n          text: \"Home\",\r\n        },\r\n      ],\r\n      questions: [\r\n        {\r\n          text: \"Questão 1 - A violência vem aumentando de gravidade e/ou de frequência no último mês?\",\r\n          id: 1,\r\n        },\r\n        {\r\n          text: \"Questão 2 - A senhora/você está grávida ou teve bebê nos últimos 18 meses?\",\r\n          id: 2,\r\n        },\r\n        {\r\n          text:\r\n            \"Questão 3 - A senhora/você tem filhos(as) com o(a) agressor(a)? (caso não tenham filhos em comum, registre não se aplica).\" +\r\n            \" Em caso afirmativo, estão vivendo algum conflito com relação à guarda dos filhos, visitas ou pagamento de pensão pelo agressor?\",\r\n          id: 3,\r\n        },\r\n        {\r\n          text:\r\n            \"Questão 4 - O(A) agressor(a) persegue a senhora/você, demonstra ciúmes excessivo, tenta controlar sua vida e as coisas que você faz? \" +\r\n            \" (aonde você vai, com quem conversa, o tipo de roupa que usa, etc.)\",\r\n          id: 4,\r\n        },\r\n        {\r\n          text:\r\n            \"Questão 5 - A senhora/você se separou recentemente do(a) agressor(a), tentou ou tem intenção de se separar?\" +\r\n            \"\\n Especifique: Separou □ Tentou □ Manifestou intenção □\",\r\n          /*outrasAlternativas: [\r\n            {\r\n              value: 1,\r\n              text: \"Separou\",\r\n            },\r\n            {\r\n              value: 2,\r\n              text: \"Tentou\",\r\n            },\r\n            {\r\n              value: 2,\r\n              text: \"Manifestou intenção\",\r\n            },\r\n          ],*/\r\n          id: 5,\r\n        },\r\n        {\r\n          text:\r\n            \"Questão 6 - O(A) agressor(a) também é violento com outras pessoas (familiares, amigos, colegas etc.)\" +\r\n            \"\\n Especifique: Crianças □ Outros familiares □ Outras pessoas □\",\r\n          id: 6,\r\n        },\r\n        {\r\n          text:\r\n            \"Questão 7 - A senhora/ você possui algum animal doméstico? (caso não tenha animal doméstico, registre não se aplica)\" +\r\n            \"\\n Em caso afirmativo, o(a) agressor(a) maltrata ou agride o animal?\",\r\n          id: 7,\r\n        },\r\n        {\r\n          text: \"Questão 8 - O(A) agressor(a) já a agrediu fisicamente outras vezes?\",\r\n          id: 8,\r\n        },\r\n        {\r\n          text: \"Questão 9 - Alguma vez o(a) agressor(a) tentou estrangular, sufocar ou afogar a senhora/você?\",\r\n          id: 9,\r\n        },\r\n        {\r\n          text: \"Questão 10 - O(A) agressor(a) já fez ameças de morte ou tentou matar a senhora/você?\",\r\n          id: 10,\r\n        },\r\n        {\r\n          text:\r\n            \"Questão 11 - O(A) agressor(a) já usou, ameaçou usar arma de fogo contra a senhora/você ou tem fácil acesso a uma arma?\" +\r\n            \"\\n Especifique: Usou □ Ameaçou usar □ Tem fácil acesso □\",\r\n          id: 11,\r\n        },\r\n        {\r\n          text: \"Questão 12 - O(A) agressor(a) já a ameaçou ou feriu com outro tipo de arma ou instrumento?\",\r\n          id: 12,\r\n        },\r\n        {\r\n          text:\r\n            \"Questão 13 - A senhora/você necessitou de atendimento médico e/ou internação após algumas dessas agressões?\" +\r\n            \"\\n Especifique: Atendimento médico □ Internação\",\r\n          id: 13,\r\n        },\r\n        {\r\n          text: \"Questão 14 - O(A) agressor(a) é usuário de drogas e/ou bebidas alcóolicas\",\r\n          id: 14,\r\n        },\r\n        {\r\n          text: \"Questão 15 - O(A) agressor(a) faz uso de medicação controlada para alguma doença mental/psiquiátrica?\",\r\n          id: 15,\r\n        },\r\n        {\r\n          text:\r\n            \"Questão 16 - A senhora/você já teve ou tem medida protetiva de urgência? (caso não tenha tido medidas protetivas de urgência antes, registre não se aplica).\" +\r\n            \" O(A) agressor(a) já descumpriu medida protetiva de afastamento ou proibição de contato?\",\r\n          id: 16,\r\n        },\r\n        {\r\n          text: \"Questão 17 - O(A) agressor(a) já ameaçou ou tentou se matar alguma vez?\",\r\n          id: 17,\r\n        },\r\n        {\r\n          text: \"Questão 18 - O(A) agressor(a) já obrigou a senhora/você a ter relações sexuais contra a sua vontade?\",\r\n          id: 18,\r\n        },\r\n        {\r\n          text: \"Questão 19 - O(A) agressor(a) está com dificuldades financeiras, está desempregado ou tem dificuldade de se manter no emprego?\",\r\n          id: 19,\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  async created() {\r\n    try {\r\n      this.isLogado = this.$store.getters.getLogged;\r\n\r\n      this.form.idCaso = this.$route.query.idCaso;\r\n      this.form.nome = this.$route.query.vitima;\r\n      var dados = await controller.buscarPorCaso(this.form.idCaso);\r\n\r\n      console.log(\"dados\", dados);\r\n      if (dados) {\r\n        this.id = dados.id;\r\n        this.form = dados;\r\n        for (var [key, answer] of Object.entries(dados.resposta)) {\r\n          var q_id = key.replace('r_', '') - 1;\r\n          this.questions[q_id].answer = answer;\r\n        }\r\n      }\r\n    }\r\n    catch (ex) {\r\n      console.error(\"Erro ao Buscar Valores\", ex);\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.el-radio__inner::after {\r\n  width: 0.5em;\r\n  height: 0.5em;\r\n}\r\n.el-radio__inner {\r\n  width: 1.125em;\r\n  height: 1.125em;\r\n}\r\n</style>\r\n\r\n<style scoped>\r\np {\r\n  text-align: center;\r\n}\r\n\r\n.percentage-value {\r\n  display: block;\r\n  margin-top: 10px;\r\n  font-size: 28px;\r\n}\r\n\r\n.percentage-label {\r\n  display: block;\r\n  margin-top: 10px;\r\n  font-size: 18px;\r\n}\r\n\r\n.el-progress {\r\n  margin-top: 10px;\r\n  margin-left: 10px;\r\n}\r\n\r\n.botao-salvar {\r\n  margin-top: 10px;\r\n}\r\n\r\n.texto-dialog {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.divisor {\r\n  margin-top: 90px;\r\n  margin-bottom: 60px;\r\n}\r\n</style>\r\n"]}]}