{"remainingRequest":"E:\\AppFrida\\node_modules\\babel-loader\\lib\\index.js!E:\\AppFrida\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\AppFrida\\src\\controller\\ctlUsuario.js","dependencies":[{"path":"E:\\AppFrida\\src\\controller\\ctlUsuario.js","mtime":1629501738617},{"path":"E:\\AppFrida\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\AppFrida\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\AppFrida\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRTovQXBwRnJpZGEvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgKiBhcyBkYiBmcm9tICIuL2ZpcmViYXNlIjsKCnZhciBTd2FsID0gcmVxdWlyZSgnc3dlZXRhbGVydDInKTsKCnZhciB2YWxpZGFMb2dpbiA9IGZ1bmN0aW9uIHZhbGlkYUxvZ2luKGxvZ2luLCBzZW5oYSkgewogIGRiLnVzdWFyaW8ud2hlcmUoImxvZ2luIiwgIj09IiwgbG9naW4pLndoZXJlKCJzZW5oYSIsICI9PSIsIHNlbmhhKS5saW1pdCgxKS5nZXQoKS50aGVuKGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgaWYgKHNuYXBzaG90LnNpemUgPiAwKSB7CiAgICAgIHZhciBkYXRhID0gc25hcHNob3QuZG9jc1swXS5kYXRhKCk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdub21lJywgZGF0YS5ub21lKTsgLy9jb25zb2xlLmxvZygnTm9tZSBTdG9yYWdlJywgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ25vbWUnKSkKCiAgICAgIG1lbnNhZ2VtTG9naW5TdWNlc3NvKCk7CiAgICB9IGVsc2UgewogICAgICBTd2FsLmZpcmUoIkVycm8hIiwgIlVzdcOhcmlvIG91IHNlbmhhIGludsOhbGlkbyIsICJlcnJvciIpOwogICAgfQogIH0pOwp9OwoKZnVuY3Rpb24gbWVuc2FnZW1Mb2dpblN1Y2Vzc28oKSB7CiAgdmFyIFRvYXN0ID0gU3dhbC5taXhpbih7CiAgICB0b2FzdDogdHJ1ZSwKICAgIHBvc2l0aW9uOiAndG9wLWVuZCcsCiAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICB0aW1lcjogMTUwMCwKICAgIHRpbWVyUHJvZ3Jlc3NCYXI6IHRydWUsCiAgICBkaWRPcGVuOiBmdW5jdGlvbiBkaWRPcGVuKHRvYXN0KSB7CiAgICAgIHRvYXN0LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBTd2FsLnN0b3BUaW1lcik7CiAgICAgIHRvYXN0LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBTd2FsLnJlc3VtZVRpbWVyKTsKICAgIH0KICB9KTsKICBUb2FzdC5maXJlKHsKICAgIGljb246ICdzdWNjZXNzJywKICAgIHRpdGxlOiAnTG9nYWRvIGNvbSBzdWNlc3NvIScKICB9KTsKfQoKdmFyIGxpc3RhclRvZG9zID0gZnVuY3Rpb24gbGlzdGFyVG9kb3MoKSB7CiAgZGIudXN1YXJpby5vcmRlckJ5KCJub21lIiwgImFzYyIpLmdldCgpLnRoZW4oZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICB2YXIgZGF0YSA9IHNuYXBzaG90LmRvY3MubWFwKGZ1bmN0aW9uIChkb2MpIHsKICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoewogICAgICAgIGlkOiBkb2MuaWQKICAgICAgfSwgZG9jLmRhdGEoKSk7CiAgICB9KTsKICAgIGNvbnNvbGUubG9nKCJUb2RvcyBVc3VhcmlvcyA9ICIsIGRhdGEpOwogIH0pOwp9OwoKdmFyIGJ1Y2FyUG9ySWQgPSBmdW5jdGlvbiBidWNhclBvcklkKGlkKSB7CiAgZGIudXN1YXJpby5kb2MoaWQpLmdldCgpLnRoZW4oZnVuY3Rpb24gKGRvYykgewogICAgaWYgKCFkb2MuZXhpc3RzKSByZXR1cm47CiAgICBjb25zb2xlLmxvZygiRGFkb3MgZG8gVXN1w6FyaW8gU2VsZWNpb25hZG8gPSAiLCBkb2MuZGF0YSgpKTsKICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgIGNvbnNvbGUuZXJyb3IoIkVycm8gYW8gYnVzY2FyIFVzdcOhcmlvIiwgZXJyb3IpOwogICAgU3dhbC5maXJlKCJFcnJvISIsICJBIGPDs2RpZ28gZG8gVXN1w6FyaW8gZm9ybmVjaWRvIG7Do28gZXhpc3RlISIsICJlcnJvciIpOwogIH0pOwp9OwoKdmFyIGluY2x1aXIgPSBmdW5jdGlvbiBpbmNsdWlyKGRhZG9zKSB7CiAgZGIudXN1YXJpby5hZGQoZGFkb3MpLnRoZW4oZnVuY3Rpb24gKHJlZikgewogICAgU3dhbC5maXJlKCJTYWx2byEiLCAiTyB1c3XDoXJpbyBmb2kgc2Fsdm8gY29tIHN1Y2Vzc28hIiwgInN1Y2Nlc3MiKTsKICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgIGNvbnNvbGUuZXJyb3IoIkVycm8gYW8gaW5jbHVpciB1c3XDoXJpbyIsIGVycm9yKTsKICAgIFN3YWwuZmlyZSgiRXJybyEiLCAiSG91dmUgdW0gcHJvYmxlbWEgYW8gdGVudGFyIGluY2x1aXIgbyB1c3XDoXJpbyEiLCAiZXJyb3IiKTsKICB9KTsKfTsKCnZhciBhbHRlcmFyID0gZnVuY3Rpb24gYWx0ZXJhcihpZCwgZGFkb3MpIHsKICBkYi51c3VhcmlvLmRvYyhpZCkudXBkYXRlKGRhZG9zKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgIFN3YWwuZmlyZSgiQXR1YWxpemFkbyEiLCAiTyB1c3XDoXJpbyBmb2kgYXR1YWxpemFkbyBjb20gc3VjZXNzbyEiLCAic3VjY2VzcyIpOwogIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgY29uc29sZS5lcnJvcigiRXJybyBhbyBhbHRlcmFyIHVzdcOhcmlvIiwgZXJyb3IpOwogICAgU3dhbC5maXJlKCJFcnJvISIsICJIb3V2ZSB1bSBwcm9ibGVtYSBhbyB0ZW50YXIgYWx0ZXJhciBvIHVzdcOhcmlvISIsICJlcnJvciIpOwogIH0pOwp9OwoKdmFyIGV4Y2x1aXIgPSBmdW5jdGlvbiBleGNsdWlyKGlkKSB7CiAgZGIudXN1YXJpby5kb2MoaWQpLmRlbGV0ZSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgU3dhbC5maXJlKCJEZWxldGFkbyEiLCAiU2V1IHVzdcOhcmlvIGZvaSBkZWxldGFkbyBjb20gc3VjZXNzbyEiLCAic3VjY2VzcyIpOwogIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgY29uc29sZS5lcnJvcigiRXJybyBhbyBleGNsdWlyIHVzdcOhcmlvIiwgZXJyb3IpOwogICAgU3dhbC5maXJlKCJFcnJvISIsICJIb3V2ZSB1bSBwcm9ibGVtYSBhbyB0ZW50YXIgZXhjbHVpciBvIHVzdcOhcmlvISIsICJlcnJvciIpOwogIH0pOwp9OwoKZXhwb3J0IHsgdmFsaWRhTG9naW4sIGxpc3RhclRvZG9zLCBidWNhclBvcklkLCBpbmNsdWlyLCBhbHRlcmFyLCBleGNsdWlyIH07"},{"version":3,"sources":["E:/AppFrida/src/controller/ctlUsuario.js"],"names":["db","Swal","require","validaLogin","login","senha","usuario","where","limit","get","then","snapshot","size","data","docs","localStorage","setItem","nome","mensagemLoginSucesso","fire","Toast","mixin","toast","position","showConfirmButton","timer","timerProgressBar","didOpen","addEventListener","stopTimer","resumeTimer","icon","title","listarTodos","orderBy","map","doc","id","console","log","bucarPorId","exists","catch","error","incluir","dados","add","ref","alterar","update","excluir","delete"],"mappings":";;AAAA,OAAO,KAAKA,EAAZ,MAAoB,YAApB;;AACA,IAAMC,IAAI,GAAGC,OAAO,CAAC,aAAD,CAApB;;AAEA,IAAIC,WAAW,GAAG,SAASA,WAAT,CAAqBC,KAArB,EAA4BC,KAA5B,EAAmC;AACjDL,EAAAA,EAAE,CAACM,OAAH,CACKC,KADL,CACW,OADX,EACoB,IADpB,EAC0BH,KAD1B,EAEKG,KAFL,CAEW,OAFX,EAEoB,IAFpB,EAE0BF,KAF1B,EAGKG,KAHL,CAGW,CAHX,EAGcC,GAHd,GAIKC,IAJL,CAIU,UAACC,QAAD,EAAc;AAChB,QAAIA,QAAQ,CAACC,IAAT,GAAgB,CAApB,EAAuB;AACnB,UAAIC,IAAI,GAAGF,QAAQ,CAACG,IAAT,CAAc,CAAd,EAAiBD,IAAjB,EAAX;AACAE,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BH,IAAI,CAACI,IAAlC,EAFmB,CAGnB;;AAEAC,MAAAA,oBAAoB;AACvB,KAND,MAMO;AACHjB,MAAAA,IAAI,CAACkB,IAAL,CAAU,OAAV,EAAmB,2BAAnB,EAAgD,OAAhD;AACH;AACJ,GAdL;AAeH,CAhBD;;AAkBA,SAASD,oBAAT,GAAgC;AAC5B,MAAME,KAAK,GAAGnB,IAAI,CAACoB,KAAL,CAAW;AACrBC,IAAAA,KAAK,EAAE,IADc;AAErBC,IAAAA,QAAQ,EAAE,SAFW;AAGrBC,IAAAA,iBAAiB,EAAE,KAHE;AAIrBC,IAAAA,KAAK,EAAE,IAJc;AAKrBC,IAAAA,gBAAgB,EAAE,IALG;AAMrBC,IAAAA,OAAO,EAAE,iBAACL,KAAD,EAAW;AAChBA,MAAAA,KAAK,CAACM,gBAAN,CAAuB,YAAvB,EAAqC3B,IAAI,CAAC4B,SAA1C;AACAP,MAAAA,KAAK,CAACM,gBAAN,CAAuB,YAAvB,EAAqC3B,IAAI,CAAC6B,WAA1C;AACH;AAToB,GAAX,CAAd;AAYAV,EAAAA,KAAK,CAACD,IAAN,CAAW;AACPY,IAAAA,IAAI,EAAE,SADC;AAEPC,IAAAA,KAAK,EAAE;AAFA,GAAX;AAIH;;AAED,IAAIC,WAAW,GAAG,SAASA,WAAT,GAAuB;AACrCjC,EAAAA,EAAE,CAACM,OAAH,CACK4B,OADL,CACa,MADb,EACqB,KADrB,EAC4BzB,GAD5B,GAEKC,IAFL,CAEU,UAACC,QAAD,EAAc;AAChB,QAAME,IAAI,GAAGF,QAAQ,CAACG,IAAT,CAAcqB,GAAd,CAAkB,UAACC,GAAD;AAAA;AAC3BC,QAAAA,EAAE,EAAED,GAAG,CAACC;AADmB,SAExBD,GAAG,CAACvB,IAAJ,EAFwB;AAAA,KAAlB,CAAb;AAIAyB,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiC1B,IAAjC;AACH,GARL;AASH,CAVD;;AAYA,IAAI2B,UAAU,GAAG,SAASA,UAAT,CAAoBH,EAApB,EAAwB;AACrCrC,EAAAA,EAAE,CAACM,OAAH,CACK8B,GADL,CACSC,EADT,EACa5B,GADb,GAEKC,IAFL,CAEU,UAAC0B,GAAD,EAAS;AACX,QAAI,CAACA,GAAG,CAACK,MAAT,EAAiB;AACjBH,IAAAA,OAAO,CAACC,GAAR,CAAY,iCAAZ,EAA+CH,GAAG,CAACvB,IAAJ,EAA/C;AACH,GALL,EAMK6B,KANL,CAMW,UAACC,KAAD,EAAW;AACdL,IAAAA,OAAO,CAACK,KAAR,CAAc,wBAAd,EAAwCA,KAAxC;AACA1C,IAAAA,IAAI,CAACkB,IAAL,CAAU,OAAV,EAAmB,2CAAnB,EAAgE,OAAhE;AACH,GATL;AAUH,CAXD;;AAaA,IAAIyB,OAAO,GAAG,SAASA,OAAT,CAAiBC,KAAjB,EAAwB;AAClC7C,EAAAA,EAAE,CAACM,OAAH,CACKwC,GADL,CACSD,KADT,EAEKnC,IAFL,CAEU,UAACqC,GAAD,EAAS;AACX9C,IAAAA,IAAI,CAACkB,IAAL,CAAU,QAAV,EAAoB,kCAApB,EAAwD,SAAxD;AACH,GAJL,EAKKuB,KALL,CAKW,UAACC,KAAD,EAAW;AACdL,IAAAA,OAAO,CAACK,KAAR,CAAc,yBAAd,EAAyCA,KAAzC;AACA1C,IAAAA,IAAI,CAACkB,IAAL,CAAU,OAAV,EAAmB,gDAAnB,EAAqE,OAArE;AACH,GARL;AASH,CAVD;;AAYA,IAAI6B,OAAO,GAAG,SAASA,OAAT,CAAiBX,EAAjB,EAAqBQ,KAArB,EAA4B;AACtC7C,EAAAA,EAAE,CAACM,OAAH,CACK8B,GADL,CACSC,EADT,EAEKY,MAFL,CAEYJ,KAFZ,EAGKnC,IAHL,CAGU,YAAM;AACRT,IAAAA,IAAI,CAACkB,IAAL,CAAU,aAAV,EAAyB,uCAAzB,EAAkE,SAAlE;AACH,GALL,EAMKuB,KANL,CAMW,UAACC,KAAD,EAAW;AACdL,IAAAA,OAAO,CAACK,KAAR,CAAc,yBAAd,EAAyCA,KAAzC;AACA1C,IAAAA,IAAI,CAACkB,IAAL,CAAU,OAAV,EAAmB,gDAAnB,EAAqE,OAArE;AACH,GATL;AAUH,CAXD;;AAaA,IAAI+B,OAAO,GAAG,SAASA,OAAT,CAAiBb,EAAjB,EAAqB;AAC/BrC,EAAAA,EAAE,CAACM,OAAH,CACK8B,GADL,CACSC,EADT,EAEKc,MAFL,GAGKzC,IAHL,CAGU,YAAM;AACRT,IAAAA,IAAI,CAACkB,IAAL,CAAU,WAAV,EAAuB,uCAAvB,EAAgE,SAAhE;AACH,GALL,EAMKuB,KANL,CAMW,UAACC,KAAD,EAAW;AACdL,IAAAA,OAAO,CAACK,KAAR,CAAc,yBAAd,EAAyCA,KAAzC;AACA1C,IAAAA,IAAI,CAACkB,IAAL,CAAU,OAAV,EAAmB,gDAAnB,EAAqE,OAArE;AACH,GATL;AAUH,CAXD;;AAaA,SACIhB,WADJ,EAEI8B,WAFJ,EAGIO,UAHJ,EAIII,OAJJ,EAKII,OALJ,EAMIE,OANJ","sourcesContent":["import * as db from \"./firebase\";\r\nconst Swal = require('sweetalert2')\r\n\r\nvar validaLogin = function validaLogin(login, senha) {\r\n    db.usuario\r\n        .where(\"login\", \"==\", login)\r\n        .where(\"senha\", \"==\", senha)\r\n        .limit(1).get()\r\n        .then((snapshot) => {\r\n            if (snapshot.size > 0) {\r\n                var data = snapshot.docs[0].data();\r\n                localStorage.setItem('nome', data.nome);\r\n                //console.log('Nome Storage', localStorage.getItem('nome'))\r\n\r\n                mensagemLoginSucesso();\r\n            } else {\r\n                Swal.fire(\"Erro!\", \"Usuário ou senha inválido\", \"error\");\r\n            }\r\n        });\r\n}\r\n\r\nfunction mensagemLoginSucesso() {\r\n    const Toast = Swal.mixin({\r\n        toast: true,\r\n        position: 'top-end',\r\n        showConfirmButton: false,\r\n        timer: 1500,\r\n        timerProgressBar: true,\r\n        didOpen: (toast) => {\r\n            toast.addEventListener('mouseenter', Swal.stopTimer)\r\n            toast.addEventListener('mouseleave', Swal.resumeTimer)\r\n        }\r\n    })\r\n\r\n    Toast.fire({\r\n        icon: 'success',\r\n        title: 'Logado com sucesso!'\r\n    })\r\n}\r\n\r\nvar listarTodos = function listarTodos() {\r\n    db.usuario\r\n        .orderBy(\"nome\", \"asc\").get()\r\n        .then((snapshot) => {\r\n            const data = snapshot.docs.map((doc) => ({\r\n                id: doc.id,\r\n                ...doc.data(),\r\n            }));\r\n            console.log(\"Todos Usuarios = \", data);\r\n        });\r\n}\r\n\r\nvar bucarPorId = function bucarPorId(id) {\r\n    db.usuario\r\n        .doc(id).get()\r\n        .then((doc) => {\r\n            if (!doc.exists) return;\r\n            console.log(\"Dados do Usuário Selecionado = \", doc.data());\r\n        })\r\n        .catch((error) => {\r\n            console.error(\"Erro ao buscar Usuário\", error);\r\n            Swal.fire(\"Erro!\", \"A código do Usuário fornecido não existe!\", \"error\");\r\n        });\r\n}\r\n\r\nvar incluir = function incluir(dados) {\r\n    db.usuario\r\n        .add(dados)\r\n        .then((ref) => {\r\n            Swal.fire(\"Salvo!\", \"O usuário foi salvo com sucesso!\", \"success\");\r\n        })\r\n        .catch((error) => {\r\n            console.error(\"Erro ao incluir usuário\", error);\r\n            Swal.fire(\"Erro!\", \"Houve um problema ao tentar incluir o usuário!\", \"error\");\r\n        });\r\n}\r\n\r\nvar alterar = function alterar(id, dados) {\r\n    db.usuario\r\n        .doc(id)\r\n        .update(dados)\r\n        .then(() => {\r\n            Swal.fire(\"Atualizado!\", \"O usuário foi atualizado com sucesso!\", \"success\");\r\n        })\r\n        .catch((error) => {\r\n            console.error(\"Erro ao alterar usuário\", error);\r\n            Swal.fire(\"Erro!\", \"Houve um problema ao tentar alterar o usuário!\", \"error\");\r\n        });\r\n}\r\n\r\nvar excluir = function excluir(id) {\r\n    db.usuario\r\n        .doc(id)\r\n        .delete()\r\n        .then(() => {\r\n            Swal.fire(\"Deletado!\", \"Seu usuário foi deletado com sucesso!\", \"success\");\r\n        })\r\n        .catch((error) => {\r\n            console.error(\"Erro ao excluir usuário\", error);\r\n            Swal.fire(\"Erro!\", \"Houve um problema ao tentar excluir o usuário!\", \"error\");\r\n        });\r\n}\r\n\r\nexport {\r\n    validaLogin,\r\n    listarTodos,\r\n    bucarPorId,\r\n    incluir,\r\n    alterar,\r\n    excluir\r\n}"]}]}